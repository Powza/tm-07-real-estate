function MyrsolMortCalc(e){function t(){c=new Array;var e="$"+parseFloat(m).toLocaleString("en");$(p).val(e);var t=$("#down_payment").val().replace(/[^0-9\.]/gi,"");return t/=100,$("#down_paymentamt").val(($("#sale_price").val().replace(/[^0-9\.]/gi,"")*t).toLocaleString("en")),$("#term, #property_tax_rate, #condo_fee, #calculate_pmi").on("keyup paste change",function(){s()}),$("#sale_price").on("keyup paste change",function(e){""==$(this).val()||$(this).val()<0?$(this).val(0):$(this).val("$"+parseFloat($(this).val().replace(/[^0-9\.]/gi,"")).toLocaleString("en")),s()}),$("#interest_rate").on("keyup paste change",function(e){$(this).val()<=0?$(this).val(0):$(this).val()>100&&$(this).val(100)}),$("#down_payment, #down_paymentamt").on("keyup paste change",function(e){var t=$(this).attr("id"),a=parseFloat($("#sale_price").val().replace(/[^0-9\.]/gi,"")),o=parseFloat($("#down_payment").val().replace(/[^0-9\.]/gi,"")),i=parseFloat($("#down_paymentamt").val().replace(/[^0-9\.]/gi,""));if("down_payment"===t)o>=0&&(o>100&&($(this).val(100),$("#down_paymentamt").val((a*o).toLocaleString("en"))),o/=100,$("#down_paymentamt").val((a*o).toLocaleString("en")));else if(i>=0)if(parseFloat(i)>parseFloat(a))$(this).val(a.toLocaleString("en")),$("#down_payment").val(100);else{var n=parseFloat(i/a*100).toFixed(0);$("#down_payment").val(n),$(this).val(i.toLocaleString("en"))}s()}),$(p)&&a(p),$(g)&&a(g),$(u)&&a(u),$("#term")&&a(h),$(f)&&a(f),$(v)&&a(v),$(y)&&a(y),$(_)&&a(_),$(w)&&a(w),!0}function s(){$(v).val(""),o()}function a(e){var t=new Object;t.val=$(e).val(),t.id=e,c.push(t)}function o(){var e=0,t=0,s=0,a=0;$(h).val()<=0||$(p).val()<0||$(f).val();var o=parseFloat($(p).val().replace(/[^0-9\.]/gi,"")),r=o;$(p).val("$"+o.toLocaleString("en")),maxpmi=0,$("#calculate_pmi").prop("checked")&&(maxpmi=.2*r),assessedpercent=.85,null!=$(v)&&$(v).val()>0&&""!=$(v).val()?(tvalue=parseFloat($(v).val().replace(/[^0-9\.]/gi,"")),a=tvalue):(r<0&&(r=0),a=r*assessedpercent),null!=$(g)&&""!=$(g).val()&&0!=$(g).val()?(amountpercent=n(g),amountpercent>=1&&(amountpercent/=100),s=r*amountpercent):(s=0,null!=$(u)&&""!=$(u).val()&&""!=$(u).val()&&(s=$(u).val(),s=n(u))),null!=$(h)&&$(h).val()>=0?(iterm=$(h).val(),iterm=n(h)):iterm=30,null!=$(f)&&""!=$(f).val()?(iInterestRate=$(f).val(),iInterestRate=n(f),iInterestRate>=1&&(iInterestRate/=100)):iInterestRate=.5,null!=$(y)&&""!=$(y).val()?(itaxrate=$(y).val(),itaxrate=n(y)):itaxrate=0,null!=$(_)&&""!=$(_).val()?(ipoa=$(_).val(),ipoa=n(_)):ipoa=0;parseFloat(iterm);var d=parseFloat(s),c=parseFloat(iInterestRate),m=parseFloat(c)/12,C=parseFloat(r)-parseFloat(d),x=parseFloat(C)/parseFloat(i(iterm,m)),k=parseFloat(a)/1e3*parseFloat(itaxrate)/12;return e=0,d<=maxpmi&&$("#calculate_pmi").prop("checked")&&(e=C/1e5*55),t=parseFloat(x)+parseFloat(e)+parseFloat(k)+parseFloat(ipoa),t=l(t,2),sztotal=b,sztotal=sztotal.replace(/\[TOTAL\]/gi,t),$(w).html(sztotal),t}function i(e,t){for(var s=0,a=1+t,o=a,i=0;i<12*e;i++)s+=1/o,o*=a;return s}function n(e){if($(e).val()){t=r(t=$(e).val()),$(e).val(t)}else if($(e)){t=r(t=$(e).text()),$(e).val(t)}else var t=0;return t}function r(e){return e=e.replace(/[^0-9\.]/gi,"")}function l(e,t){if(isNaN(e))return 0;if(""==e)return 0;var s=new String(e).split("."),a=parseFloat(s[0]),o="";if(s.length>1){n=new String(s[1]);n=String(parseFloat(s[1])/Math.pow(10,n.length-t));for(-1==(i=(n=String(a+Math.round(parseFloat(n))/Math.pow(10,t))).indexOf("."))&&(i=(n+=".").indexOf("."));n.length<=i+t;)n+="0";o=n}else{var i,n=new String(a);for(i=(n+=".").indexOf(".");n.length<=i+t;)n+="0";o=n}return C&&(o=d(o)),o}function d(e){e+="",x=e.split("."),x1=x[0],x2=x.length>1?"."+x[1]:"";for(var t=/(\d+)(\d{3})/;t.test(x1);)x1=x1.replace(t,"$1,$2");return"$"+x1+x2}var c=new Array,p=(e.formid,e.priceid||""),m=(e.price,e.getpriceid||""),g=e.percdownid||"",u=e.amountdownid||"",h=e.termid||"",f=e.interestrateid||"",v=e.assessedamountid||"",y=e.taxrateid||"",_=e.poafeesid||"",w=e.totalid||"",b=e.totalformatstr||'Approximate Monthly Payment <span class="mortgage-monthly">[TOTAL]</span>',C=e.addcommas||!0;t(),o(),this.MMC_Init=t,this.MMC_ResetOfPrice_CB=s,this.MMC_AddToReset=a,this.MMC_Reset=function(){for(var e=0;e<c.length;e++){var t=c[e];$(t.id).val(t.val)}o()},this.MMC_Compute=o,this.MMC_InterestFactor=i,this.MMC_CleanNumberById=n,this.MMC_CleanNumber=r,this.MMC_FormatNumber=l,this.MMC_AddCommas=d}function noty_msg(e,t,s){return s=1==s||"success"==s?"success":0==s||"error"==s?"error":9==s||"warning"==s?"warning":"info",toastr[s](t,e)}function getPopTitle(e){return $("#"+e+"_content > div.popTitle").html()}function getPopContent(e){return $("#"+e+"_content > div.popContent").html()}function myrsol_mobile_check(){$("#myrsol-mobile-check").is(":hidden")&&(store.set("listings_view","grid_view"),myrsol_grid_view())}function myrsol_list_view(){$("#listings").removeClass("grid_view").addClass("list_view"),$("#ml_g").removeClass("btn-primary").addClass("btn-default"),$("#ml_l").addClass("btn-primary").removeClass("btn-default"),$(".myrsol-idx-summary .summary-top").css({height:""}),$(".myrsol-idx-summary").removeClass("col-md-4 col-sm-6").addClass("col-md-12"),$(".list_view").find(".summary-top").matchHeight(),store.set("listings_view","list_view")}function myrsol_grid_view(){$("#listings").removeClass("list_view").addClass("grid_view"),$("#ml_l").removeClass("btn-primary").addClass("btn-default"),$("#ml_g").addClass("btn-primary").removeClass("btn-default"),$(".myrsol-idx-summary").removeClass("col-md-12").addClass("col-md-4 col-sm-6"),$(".grid_view").find(".summary-top").matchHeight(),store.set("listings_view","grid_view")}function loadListingIndexMapScript(){return $("#mapWrap").is(":visible")?$("#mapWrap").hide():$("#mapWrap").show(),!0===is_map_loaded||("object"==typeof google&&"object"==typeof google.maps?listingSummaryMap():$.getScript("https://maps.googleapis.com/maps/api/js?v=3&key="+mapK+"&callback=listingSummaryMap"),is_map_loaded=!0,!0)}function listingSummaryMap(){var e={center:new google.maps.LatLng(default_lat,default_lon),zoom:11,zoomControlOptions:{style:google.maps.ZoomControlStyle.DEFAULT},scrollwheel:!1,panControl:!1,streetViewControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU}};listingSummaryMarkers(summary_map=new google.maps.Map(document.getElementById("listing_summary_map"),e),s_markers)}function listingSummaryMarkers(e,t){var s=new google.maps.MarkerImage("//assets.myrsol.com/gmap/shadow2.png",new google.maps.Size(23,14),new google.maps.Point(0,0),new google.maps.Point(0,14)),a=new Array,o=ListingIndexMapTemplate;if("undefined"!=typeof map_type&&"custom_listing"==map_type&&(o=CustomListingIndexMapTemplate),t.length>=1)for(l=0;l<t.length;l++){var i=t[l];a[l]=new google.maps.LatLng(i.lat,i.lon);var n=$.interpolate(o,{mlsnum:i.id,addr:i.address,city:i.city,state:i.state,zip:i.zip,photo:i.pimg,price:i.price,beds:i.beds?i.beds:"N/A",baths:i.baths?i.baths:"N/A",sqft:i.sqft?i.sqft:"N/A",pclass:i.pclass,pclass_display:i.pclass_display,status:i.status,courtesy_of:i.courtesy_of,br_img:i.br_img,prop_url:i.prop_url});s_marker=new google.maps.Marker({position:new google.maps.LatLng(i.lat,i.lon),icon:"//assets.myrsol.com/gmap/regular_listing_off.png",shadow:s,map:e,icon_off:"//assets.myrsol.com/gmap/regular_listing_off.png",icon_on:"//assets.myrsol.com/gmap/regular_listing_on.png",tooltip:n,mlsid:i.id}),listingSummaryMarkerInteraction(s_marker,i,0)}for(var r=new google.maps.LatLngBounds,l=0,d=a.length;l<d;l++)r.extend(a[l]);e.fitBounds(r)}function listingSummaryMarkerInteraction(e,t,s){google.maps.event.addListener(e,"click",function(){1==$("#markerTooltip").length&&($("#markerTooltip").remove(),listingSummaryMarkerOverlay(e,e.tooltip,s,!0))}),google.maps.event.addListener(e,"mouseover",function(t){if(e.setIcon(e.icon_on),1==$("#markerTooltip").hasClass("stayOpen"))return!1;clearTimeout(mouseoverTimeoutId),null!=$("#markerTooltip")&&void 0!==$("#markerTooltip")&&null!=mouseoverTimeoutId&&$("#markerTooltip").remove(),mouseoverTimeoutId=setTimeout(function(){listingSummaryMarkerOverlay(e,e.tooltip,s)},200)}),google.maps.event.addListener(e,"mouseout",function(t){if(e.setIcon(e.icon_off),1==$("#markerTooltip").hasClass("stayOpen"))return!1;mouseoverTimeoutId&&(clearTimeout(mouseoverTimeoutId),mouseoverTimeoutId=setTimeout(function(){null!=$("#markerTooltip")&&void 0!==$("#markerTooltip")&&null!=mouseoverTimeoutId&&$("#markerTooltip").remove()},1500))})}function listingSummaryfromLatLngToPoint(e,t){var s=t.getProjection().fromLatLngToPoint(t.getBounds().getNorthEast()),a=t.getProjection().fromLatLngToPoint(t.getBounds().getSouthWest()),o=Math.pow(2,t.getZoom()),i=t.getProjection().fromLatLngToPoint(e);return new google.maps.Point((i.x-a.x)*o,(i.y-s.y)*o)}function listingSummaryMarkerOverlay(e,t,s,a){var o=listingSummaryfromLatLngToPoint(e.getPosition(),summary_map),i={x:o.x+$("#listing_summary_map").offset().left,y:o.y+$("#listing_summary_map").offset().top};0==s?($("body").append($('<div id="markerTooltip"></div>').css({"z-index":99999,position:"absolute",left:i.x,top:i.y}).html(t)),1==a&&$("#markerTooltip").addClass("stayOpen"),$("#stroot_"+e.mlsid).removeClass("idxmaptip").addClass("idxmaptip")):($("body").append($('<div id="markerTooltip"></div>').css({"z-index":99999,position:"absolute",left:i.x,top:i.y}).html(t)),1==a&&$("#markerTooltip").addClass("stayOpen"),$("#stroot_"+e.mlsid).removeClass("idxmaptip").addClass("idxmaptip"),$(".multiview-map").on("click",function(e){e.preventDefault(),showListing({id:$(this).attr("data-id"),pclass:$(this).attr("data-class")}),$("#ttroot_"+$(this).attr("data-id")).addClass("mapsidebar-selected"),$(".maplayout-left").scrollTop($(".maplayout-left").scrollTop()+$("#ttroot_"+$(this).attr("data-id")).position().top),$("#prop_display").scrollTo()})),$(".close-tooltip").on("click",function(e){e.preventDefault(),$("#markerTooltip").remove()}),$(".proptooltip-img img").on("error",function(){$(this).attr("src","//assets.myrsol.com/listing_images/listings_map_noimg.jpg")}),0==a&&($("#markerTooltip").on("mouseover",function(){clearTimeout(mouseoverTimeoutId),mouseoverTimeoutId=null}),$("#markerTooltip").on("mouseout",function(){clearTimeout(mouseoverTimeoutId),mouseoverTimeoutId=setTimeout(function(){null!=$("#markerTooltip")&&void 0!==$("#markerTooltip")&&null!=mouseoverTimeoutId&&$("#markerTooltip").remove()},500)}))}function handleFavoritesPost(e,t){var s=e,a=t;$.ajax({url:"/favorites/"+t+"/"+e,type:"GET",dataType:"json",success:function(e){if(999===e.status_type)noty_msg("Hello",e.status,"warning"),$.get("/users/login",function(e){0!=$("#login-modal").length?$("#login-modal").html(e).modal("show").on("shown.bs.modal",function(){toggleLoginReg(0)}):($("body").append('<div id="login-modal" class="modal fade"></div>'),$("#login-modal").html(e).modal("show").on("hidden.bs.modal",function(){}).on("shown.bs.modal",function(){toggleLoginReg("register")}))}).success(function(){}),$("*").spin(!1);else{if(1==e.status_type){var t=$("#favoriteType_"+s).attr("data-type");"delete"==a?(noty_msg("Favorite Removed",e.status,"info"),"lview"==t?$("#favoriteType_"+s).removeClass("btn-danger dv-favorite-remove").addClass("btn-success dv-favorite-add").html('<i class="fa fa-heart"></i> Add Favorite'):$("#favoriteType_"+s).removeClass("dv-favorite-remove").addClass("dv-favorite-add").attr("data-original-title","Add Favorite").prop("title","").tooltip("hide")):(noty_msg("Favorite Added!",e.status,"success"),"lview"==t?$("#favoriteType_"+s).removeClass("btn-success dv-favorite-add").addClass("btn-danger dv-favorite-remove").html('<i class="fa fa-heart"></i> Remove Favorite'):$("#favoriteType_"+s).removeClass("dv-favorite-add").addClass("dv-favorite-remove").attr("data-original-title","Remove Favorite").prop("title","").tooltip("hide"))}else 0==e.status_type||3==e.status_type?noty_msg("",e.status,"info"):2==e.status_type?noty_msg("Error",e.status,"error"):noty_msg("Oops",e.status,"warning");$("*").spin(!1)}}})}function loadGoogleConversion(e,t){void 0===t&&(t=""),"function"==typeof window.google_trackConversion&&window.google_trackConversion({google_conversion_id:adWordConversion.gad_id,google_conversion_label:adWordConversion.gad_label,google_conversion_color:"ffffff",google_conversion_format:"3",google_conversion_language:"en",google_custom_params:{conversionType:e,mlsNum:t},google_remarketing_only:!1})}function verify_streetview(){(new google.maps.StreetViewService).getPanoramaByLocation(new google.maps.LatLng(myrsol_thirdparty.lat,myrsol_thirdparty.lon),50,function(e,t){if("OK"!=t)return $("#tab-gview").hide(),!0})}function OpenListingModal(e,t){$.get(e,function(e){if(0==e.status)return noty_msg("Error",e,"error"),!1;0!=$("#"+t).length?$("#"+t).html(e.content).modal("show").on("shown.bs.modal",function(){}):($("body").append('<div id="'+t+'" class="modal fade"></div>'),$("#"+t).html(e.content).modal("show").on("hidden.bs.modal",function(){}).on("shown.bs.modal",function(){}))},"json").success(function(){$("*").spin(!1)})}function openUserModal(e,t){$.get("/users/login",function(s){if(0==s.status)return $("#login-modal").modal("hide"),void noty_msg("Info",s.msg,"warning");$("#login-modal").length<=0&&$("body").append('<div id="login-modal" class="modal fade"></div>'),$("#login-modal").html(s).modal("show").on("hidden.bs.modal",function(){"undefined"==e&&null==e&&""==e||"savesearch"===e||(window.location=e)}).on("shown.bs.modal",function(){toggleLoginReg(t)})}).success(function(){})}function toggleLoginReg(e){0==e||"register"==e||"reg"==e?($("#ajaxRegisterForm").show(),$("#login-modal .modal-header h4.modal-user-reg").addClass("active"),$("#login-modal .modal-header h4.modal-user-log").removeClass("active"),$("#login-reg-btns").html('<button type="button" class="btn btn-success" id="registrationSubmit" data-loading-text="Saving..."><i class="fa fa-ok"></i> Register</button><a href="/lostpassword.html" title="Lost your password?" class="pull-right btn btn-default">Lost your password?</a>'),$("#ajaxLoginForm").hide()):($("#ajaxLoginForm").show(),$("#login-modal .modal-header h4.modal-user-log").addClass("active"),$("#login-modal .modal-header h4.modal-user-reg").removeClass("active"),$("#login-reg-btns").html('<button type="button" class="btn btn-success" id="loginSubmit"><i class="fa fa-check"></i> Login</button><a href="/lostpassword.html" title="Lost your password?" class="btn btn-default">Lost your password?</a>'),$("#ajaxRegisterForm").hide())}function ajax_registerUser(){var e=null;e=$.param({"data[Contact][lvh]":store.get("listings_viewed"),"data[Contact][sh]":store.get("search_history")}),$.post("/users/ajaxhandler/register/",$("#UserRegisterForm").serialize()+"&"+e,function(e){if(0==e.status||10==e.status){if(store.remove("listings_viewed"),store.remove("search_history"),"undefined"==typeof GoogleAnalyticsObject&&"object"!=typeof ga||ga("send","event","Users","/register.html","New Registration"),loadGoogleConversion("register"),0!=$("#ssModal").length)return void $("#login-modal").modal("hide");$("#login-modal").length>0?($("#login-modal").modal("hide"),window.location.reload()):window.location=e.redirect_url,$("#registrationSubmit").button("reset")}else 30==e.status?(noty_msg("Error",e.msg,"error"),$("#login-modal").modal("hide")):$("#registrationSubmit").button("reset")},"json")}function ajax_loginUser(){$.post("/users/ajaxhandler/login",$("#UserLoginForm").serialize()+"&"+$.param({"data[User][r_url]":$(location).attr("href")}),function(e){if(0==e.status){if(noty_msg("Success!",e.msg,"success"),"undefined"==typeof GoogleAnalyticsObject&&"object"!=typeof ga||ga("send","event","Users","/login.html","New Login"),0!=$("#ssModal").length)return void $("#login-modal").modal("hide");""!=e.redirect_url?e.redirect_url!=$(location).attr("href")?window.location="/profile.html":window.location=e.redirect_url:null!=e.redirect_arr.oth_from?window.location=e.redirect_arr.oth_from:""!=e.redirect_arr.r_url.path?window.location=e.redirect_arr.r_url.path:null==e.redirect_arr.oth_from?window.location="/":window.location=e.redirect_arr.oth_from}else noty_msg("Error",e.msg,"error"),30==e.status&&$("#loginSubmit").text("Error Logged in Already").removeClass("btn-success").addClass("btn-danger")},"json")}function prop_spy(e){$.get("/favorites/property_spy/"+e,function(e){$(".myrsol-idx-spy").popover({title:e.title,content:e.content,container:"body",html:!0}).popover("show")},"json").error(function(){})}function init_masonry(){$("#prop-info").masonry({itemSelector:".details-onecol-grouped",gutterWidth:12,isAnimated:!0,columnWidth:function(e){var t=e/250|0,s=(e-12*(t-1))/t|0;return e<250&&(s=e),$(".details-onecol-grouped").width(s),s}})}function init_rslider(){$("#gallery-1").royalSlider({fullscreen:{enabled:!0,nativeFS:!0},controlNavigation:"thumbnails",loop:!1,imageScalePadding:-20,navigateByClick:!0,numImagesToPreload:4,arrowsNavAutohide:!0,arrowsNavHideOnTouch:!0,keyboardNavEnabled:!0,fadeinLoadedSlide:!0,globalCaption:!0,globalCaptionInside:!1,thumbs:{appendSpan:!0,firstMargin:!0,fitInViewport:!0}})}function loadMap(){new google.maps.DirectionsService;var e,t={center:new google.maps.LatLng(myrsol_thirdparty.lat,myrsol_thirdparty.lon),zoom:17,zoomControlOptions:{style:google.maps.ZoomControlStyle.DEFAULT},scrollwheel:!1,panControl:!1,streetViewControl:!1,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControlOptions:{style:google.maps.MapTypeControlStyle.DROPDOWN_MENU}};directionsDisplay=new google.maps.DirectionsRenderer,e=new google.maps.Map(document.getElementById("g_map"),t),directionsDisplay.setMap(e),directionsDisplay.setPanel(document.getElementById("directionsPanel"));var s=new google.maps.InfoWindow({content:'<div id="mapDirections"><form action="#" onsubmit="calcRoute();return false;" class="form-inline"><div class="input-group"><input type="text" id="start" class="form-control input-sm" value="" placeholder="Type address from"><span class="input-group-btn"><input type="submit" class="btn btn-sm btn-primary" value="Find directions"></span></div></form></div>'}),a=new google.maps.Marker({position:new google.maps.LatLng(myrsol_thirdparty.lat,myrsol_thirdparty.lon),icon:"//assets.myrsol.com/gmap/regular_listing_off.png",shadow:new google.maps.MarkerImage("//assets.myrsol.com/gmap/shadow2.png",new google.maps.Size(23,14),new google.maps.Point(0,0),new google.maps.Point(0,14)),map:e,mlsid:myrsol_thirdparty.mlsid});s.open(e,a),$('a[data-toggle="tab"]').on("shown.bs.tab",function(s){e.setCenter(t.center),google.maps.event.trigger(e,"resize"),e.setZoom(e.getZoom())}).on("hidden.bs.tab",function(e){$("#directionsPanel").empty()}),google.maps.event.addListener(a,"click",function(){s.open(e,a)}),google.maps.event.addDomListener(window,"load",loadMap)}function calcRoute(){var e=new google.maps.DirectionsService,t={origin:document.getElementById("start").value,destination:new google.maps.LatLng(myrsol_thirdparty.lat,myrsol_thirdparty.lon),travelMode:google.maps.DirectionsTravelMode.DRIVING};e.route(t,function(e,t){t==google.maps.DirectionsStatus.OK&&($("#directionsPanel").empty(),directionsDisplay.setDirections(e))})}function loadStreetViewMap(){(new google.maps.StreetViewService).getPanoramaByLocation(new google.maps.LatLng(myrsol_thirdparty.lat,myrsol_thirdparty.lon),50,processSVData)}function processSVData(e,t){if("OK"==t){var s={position:new google.maps.LatLng(myrsol_thirdparty.lat,myrsol_thirdparty.lon),pov:{heading:34,pitch:10}};new google.maps.StreetViewPanorama(document.getElementById("g_streetview"),s)}else $("#g_streetview").html('<div class="alert alert-info">Steet View data could not be found for this location.</div>')}function loadBirdsEyeMap(){var e={center:new google.maps.LatLng(myrsol_thirdparty.lat,myrsol_thirdparty.lon),zoom:19,mapTypeId:"satellite",heading:180,tilt:45},t=new google.maps.Map(document.getElementById("ms_birdseye"),e);new google.maps.Marker({position:new google.maps.LatLng(myrsol_thirdparty.lat,myrsol_thirdparty.lon),icon:"//assets.myrsol.com/gmap/regular_listing_off.png",shadow:new google.maps.MarkerImage("//assets.myrsol.com/gmap/shadow2.png",new google.maps.Size(23,14),new google.maps.Point(0,0),new google.maps.Point(0,14)),map:t,mlsid:myrsol_thirdparty.mlsid}),$('a[data-toggle="tab"]').on("shown.bs.tab",function(s){google.maps.event.trigger(t,"resize"),t.setZoom(t.getZoom()),t.setCenter(e.center)})}function loadWalkScore(){var e=myrsol_thirdparty.lat,t=myrsol_thirdparty.lon,s="wsid="+myrsol_thirdparty.walkscore_key,a='<iframe src="https://www.walkscore.com/serve-tile.php?'+(s+="&lat="+e+"&lng="+t)+'" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" frameborder="0" scrolling="no" width="100%" height="300" style="border: 0"></iframe>';$("#walk_score").html(a)}function advanced_features_toggle(){"none"==$("#adv_ftr_hidden").css("display")?(store.set("advanced_features",0),$("#adv_ftr_hidden").slideDown("slow")):(store.set("advanced_features",1),$("#adv_ftr_hidden").slideUp("slow"))}function addSearchHistory(){var e=store.get("search_history");null==e&&(e=[]),e.length>=25&&e.shift(),e.push(current_search),store.set("search_history",e)}function addListingHistory(){var e=store.get("listings_viewed");null==e&&(e=[]);0==getObjects(e,"mlsid",current_mlsid.mlsid).length&&(e.length>=50&&e.shift(),e.push(current_mlsid),store.set("listings_viewed",e))}function retHistory(){return"&"+$.param({"data[Contact][lvh]":store.get("listings_viewed"),"data[Contact][sh]":store.get("search_history")})}function objectLength(e){var t=0;for(var s in e)e.hasOwnProperty(s)&&t++;return t}function getObjects(e,t,s){var a=[];for(var o in e)e.hasOwnProperty(o)&&("object"==typeof e[o]?a=a.concat(getObjects(e[o],t,s)):o==t&&e[t]==s&&a.push(e));return a}var fieldsToMask="#UserPassword, #regUserPassword, #regUserPasswordConfirm, #LoginPassword",checkImageError=function(e){$(e).one("error",function(){this.src="https://assets.myrsol.com/noimage.svg"})};$(window).load(function(){$("#agent-main, #agent-group-main").find(".agent-container").matchHeight(),$("#agent-main, #agent-group-main").find(".agent-block").matchHeight(),$(".related-listings").find(".related-container").matchHeight()}),$(window).resize(function(){$("#agent-main, #agent-group-main").find(".agent-container").matchHeight(),$("#agent-main, #agent-group-main").find(".agent-block").matchHeight(),$(".related-listings").find(".related-container").matchHeight(),myrsol_mobile_check()}),$(document).on("click","#listings-sort li a",function(){$(".selected-sort-filter").text($(this).text())}),$(document).on("click","#listings-limit li a",function(){$(".selected-limit-filter").text($(this).text())}),$(document).ready(function(){if(iNoBounce.disable(),$(".nav-pills, .nav-tabs").tabdrop(),$(".pop").each(function(){var e=$(this);e.popover({html:!0,title:getPopTitle(e.attr("id")),content:getPopContent(e.attr("id"))}),$("#"+e.attr("id")+"_content").remove()}),$(document).on("click",".popover-close",function(e){e.preventDefault(),$("#"+$(this).attr("data-id")).popover("toggle")}),$("[rel=tooltip]").tooltip({container:"body"}),$("a[rel=popover], [rel=popover]").popover().click(function(e){e.preventDefault()}),$(".colorbox").colorbox({rel:"colorbox",width:"50%",height:"80%"}),toastr.options={closeButton:!0,debug:!1,progressBar:!0,positionClass:"toast-top-right",onclick:null,showDuration:"400",hideDuration:"1000",timeOut:"10000",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},$.fn.select2&&($.fn.select2.defaults.set("theme","bootstrap"),$.fn.select2.defaults.set("minimumResultsForSearch",10),$.fn.select2.defaults.set("width","100%"),$(".select2").select2()),$("#flashMessage")){var e=$("#flashMessage"),t=e.attr("class");"notice"==t&&(t="info"),null!=e.text()&&""!=e.text()&&""!=t&&("custom_form"==e.attr("class")||"onpage"==e.attr("class")?e.show():toastr[t](e.html()))}$(".summary-img img, .sp-thumbnail, .sp-image").one("error",function(){this.src="https://assets.myrsol.com/noimage.svg"}),$(".vertical li:has(ul)").addClass("parent"),$(".horizontal li:has(ul)").addClass("parent"),$("body").on("click",".dynidx-summary-switch",function(e){e.preventDefault();var t=$(this).attr("data-type");"list"==t?myrsol_list_view():"grid"==t?myrsol_grid_view():"map"==t&&loadListingIndexMapScript()}),$(".myrsol-idx-summary .summary-top").hover(function(){$(this).closest(".summary-top").addClass("idx-prop-hover")},function(){$(this).closest(".summary-top").removeClass("idx-prop-hover")}),$("#ListingLp, #ListingHp").autoNumeric("init",{aSep:",",aDec:".",aSign:"$ ",vMax:999999999999,unSetOnSubmit:!0}),$(".phoneno").on("paste",function(e){var t=$(this).val().replace(/\s+/g,"").replace(/_/g,"");$(this).val(t)}),$("body").delegate(fieldsToMask,"focus",function(e){$(fieldsToMask).css({"text-shadow":"none",color:"#555555"})}),$("body").delegate(fieldsToMask,"blur",function(e){if("text"==$(this).attr("type")&&$(this).val().length>=2){var t=window.navigator.userAgent,s=t.indexOf("MSIE "),a=t.indexOf("Edge/");s>0||a>0||navigator.userAgent.match(/Trident.*rv\:11\./)?$(fieldsToMask).css({"text-shadow":"0px 0px 10px rgba(0,0,0,1)",color:"#c7c7c7"}):$(fieldsToMask).css({"text-shadow":"0px 0px 8px rgba(0,0,0,1)",color:"transparent"})}})}),function(e){"use strict";e.extend(e,{interpolate:function(e,t,s){var a=s||/{([^{}]*)}/g;return s&&(a=s),e.replace(a,function(e,s){var a=t[s];return"string"==typeof a||"number"==typeof a?a:""})}})}(jQuery),function(e){e.fn.spin=function(t,s){var a={tiny:{lines:9,length:1,width:4,radius:4,speed:1.3,className:""},small:{lines:13,length:1,width:4,radius:10,speed:1.3,className:""},large:{lines:15,length:1,width:5,radius:19,speed:1.3,className:""}};if(Spinner)return this.each(function(){var o=e(this),i=o.data();i.spinner&&(i.spinner.stop(),delete i.spinner),!1!==t&&("string"==typeof t&&(t=t in a?a[t]:{},s&&(t.color=s)),i.spinner=new Spinner(e.extend({color:o.css("color")},t)).spin(this))});throw"Spinner class not available."}}(jQuery),function(e){e.fn.uniformHeight=function(){var t,s,a=0;return this.each(function(){t=e(this).wrapInner('<div class="wrapper" />').children(".wrapper"),s=t.outerHeight(),a=Math.max(a,s),t.children().unwrap()}).height(a)}}(jQuery);var summary_map,ListingIndexMapTemplate='<div id="stroot_{mlsnum}" class="idxmaptip"><div class="up-arrow"><i class="fa fa-caret-up"></i></div><div class="proptooltip-addr"><button type="button" class="close-tooltip close" aria-label="Close"><span aria-hidden="true">&times;</span></button>{addr}<br /><span class="city-state-zip">{city}, {state} {zip}</span></div><div class="proptooltip-content clearfix"><div class="proptooltip-img"><img src="{photo}" alt="Loading..." /></div><div class="proptooltip-summary"><ul class="unstyled"><li class="priceBlock">{price}</li><li>MLS# {mlsnum}<br />{beds} br, {baths} ba, {sqft} sqft</li><li>{status}</li><li>{pclass}</li></ul><a href="{prop_url}" data-id="{mlsnum}" data-class="{pclass_display}" class="view-listing btn btn-sm btn-primary" style="margin-top: 5px;">View Listing</a></div></div><div class="bottom">{br_img} <span class="office">{courtesy_of}</span></div></div>',CustomListingIndexMapTemplate='<div id="stroot_{mlsnum}" class="idxmaptip"><div class="up-arrow"><i class="fa fa-caret-up"></i></div><div class="proptooltip-addr"><button type="button" class="close-tooltip close" aria-label="Close"><span aria-hidden="true">&times;</span></button>{addr}<br /><span class="city-state-zip">{city}, {state} {zip}</span></div><div class="proptooltip-content clearfix"><div class="proptooltip-img"><img src="{photo}" alt="Loading..." /></div><div class="proptooltip-summary"><ul class="unstyled"><li class="priceBlock">{price}</li><li>{beds} br, {baths} ba, {sqft} sqft</li><li>{status}</li><li>{pclass}</li></ul><a href="{prop_url}" data-id="{mlsnum}" class="view-listing btn btn-sm btn-primary" style="margin-top: 5px;">View Listing</a></div></div></div>',g_icon_default_on="//assets.myrsol.com/gmap/regular_listing_off.png",g_icon_default_off="//assets.myrsol.com/gmap/regular_listing_on.png",g_icon_shadow="//assets.myrsol.com/gmap/shadow2.png";$(document).ready(function(){$(".listings_view .details-onecol-grouped").each(function(e,t){$(this).children("p").length<=0&&$(this).remove()}),$("#adv_ftr_hidden").on("keyup paste change",".minmax-input input",function(e){$(this).val($(this).val().replace(/[^0-9\.]/gi,""))}),$("#listings-sort li").each(function(e,t){$(t).hasClass("selected")&&$(".selected-sort-filter").text($(t).text())}),$("#listings-limit li").each(function(e,t){$(t).hasClass("selected")&&$(".selected-limit-filter").text($(t).text())}),$(".save-search").on("click",function(e){e.preventDefault(),$(".save-search").spin("tiny"),$.get("/savedsearches/add",function(e){$("#ss-add-holder").html(e),$("head").append('<style type="text/css">body.modal-open { overflow: visible; }</style>'),$("#ssModal").modal("show").on("shown.bs.modal",function(){$(".save-search").spin(!1),$("#ssParams").val(ss_params)})},"html")}),$("#tab-gview").length>0&&verify_streetview(),$("#prop_display, .listings_view").on("click",".dv-inquire",function(e){e.preventDefault(),$(".dv-inquire").spin("small","white"),OpenListingModal("/listings/contact/"+$(this).attr("data-id"),"inquiry-modal")}),$("#prop_display, .listings_view").on("click",".dv-mortgage",function(e){e.preventDefault(),$(".dv-mortgage").spin("small","black"),OpenListingModal("/mortgage_calculator/listing/"+$(this).attr("data-id"),"mortgagecalc-modal")}),$("#prop_display, .listings_view").on("click",".dv-tellfriend",function(e){e.preventDefault(),$(".dv-tellfriend").spin("small","black"),OpenListingModal("/listings/tell_a_friend/"+$(this).attr("data-id"),"tellfriend-modal"),e.stopPropagation()}),$("#prop_display, .listings_view").on("click",".dv-schedule",function(e){e.preventDefault(),$(".dv-schedule").spin("small","black"),OpenListingModal("/listings/schedule_showing/"+$(this).attr("data-id"),"scheduleshowing-modal")}),$("#prop_display, .listings_view").on("click",".myrsol-idx-spy",function(e){e.preventDefault(),prop_spy($(this).attr("data-id")),$("#prop_display, .listings_view").off("click",".myrsol-idx-spy")}),$(document).on("click",".close-spy-popover",function(e){e.preventDefault(),$("#property-spy-popover").popover("toggle")}),$(".listings_view").on("click",".cl-dv-inquire",function(e){e.preventDefault(),OpenListingModal("/custom_listings/contact/"+$(this).attr("data-id"),"inquiry-modal")}),$(".listings_view").on("click",".cl-dv-tellfriend",function(e){e.preventDefault(),OpenListingModal("/custom_listings/tell_a_friend/"+$(this).attr("data-id"),"tellfriend-modal")}),$(".listings_view").on("click",".cl-dv-mortgage",function(e){e.preventDefault(),OpenListingModal("/mortgage_calculator/custom_listing/"+$(this).attr("data-id"),"mortgagecalc-modal")}),$(".listings_view").on("click",".cl-dv-schedule",function(e){e.preventDefault(),OpenListingModal("/custom_listings/schedule_showing/"+$(this).attr("data-id"),"scheduleshowing-modal")}),$("body").on("click",".myrsol-idx-fav",function(e){var t=$(this).attr("data-id");e.preventDefault(),$("#favoriteType_"+t).spin("tiny","white"),1==$(this).hasClass("dv-favorite-remove")?handleFavoritesPost(t,"delete"):handleFavoritesPost(t,"add")}),$("body").delegate("#login-modal .toggle-loginreg","click",function(e){toggleLoginReg($(this).attr("data-type"))}),$("body").delegate("#registrationSubmit","click",function(e){$("#UserRegisterForm").valid()?ajax_registerUser():$(this).button("reset")}),$(".loginreg-modal-open").on("click",function(e){e.preventDefault();var t=$(this).attr("data-type");$.get("/users/login",function(e){0!=e.status?0!=$("#login-modal").length?$("#login-modal").html(e).modal("show").on("shown.bs.modal",function(){toggleLoginReg(t)}):($("body").append('<div id="login-modal" class="modal fade"></div>'),$("#login-modal").html(e).modal("show").on("hidden.bs.modal",function(){}).on("shown.bs.modal",function(){toggleLoginReg(t)})):noty_msg("Info",e.msg,"warning")})}),$("body").delegate(".resend-verify-email","click",function(e){e.preventDefault(),$(".resend-verify-email").spin("tiny"),$.get("/users/resend_confirmation/",function(e){1==e.status?noty_msg("Success!",e.msg,"success"):noty_msg("Error",e.msg,"error"),$(".resend-verify-email").spin(!1)})}),$("body").delegate("#loginSubmit","click",function(e){$("#UserLoginForm").valid()&&ajax_loginUser()}),$("#UserPassword, #UserUsername").on("keypress",function(e){13==e.which&&$("#UserLoginForm").valid()&&(e.preventDefault(),ajax_loginUser())}),$("#prop_display, .listings_view").on("click",".goto-map",function(e){e.preventDefault(),$.scrollTo("#tab-gmap",1e3),$('.thirdparty-tabs a[href="#g-map"]').tab("show")}),$("#prop_display, .listings_view").on("click","#tab-gmap",function(e){e.preventDefault(),$("#prop_display, .listings_view").on("shown.bs.tab",'a[data-toggle="tab"]',function(e){loadMap()}),$("#prop_display, .listings_view").off("click","#tab-gmap")}),$("#prop_display, .listings_view").on("click","#tab-gview",function(e){e.preventDefault(),$("#prop_display, .listings_view").on("shown.bs.tab",'a[data-toggle="tab"]',function(e){loadStreetViewMap()}),$("#prop_display, .listings_view").off("click","#tab-gview")}),$("#prop_display, .listings_view").on("click","#tab-msbirdseye",function(e){loadBirdsEyeMap(),e.preventDefault(),$("#prop_display, .listings_view").off("click","#tab-msbirdseye")}),$("#prop_display, .listings_view").on("click","#tab-walkscore",function(e){e.preventDefault(),loadWalkScore(),$("#prop_display, .listings_view").off("click","#tab-walkscore")}),$("#prop_display, .listings_view").on("click","#tab-eduschools",function(e){$("#tab-eduschools").spin("tiny");var t=$(this).attr("data-from");e.preventDefault(),schools_url="/listings/thirdparty/edu-schools/"+myrsol_thirdparty.mlsid,"cl"==t&&(schools_url="/custom_listings/thirdparty/edu-schools/"+myrsol_thirdparty.mlsid),$.get(schools_url,function(e){$("#edu_schools").html(e),$("#tab-eduschools").spin(!1)},"html"),$("#prop_display, .listings_view").off("click","#tab-eduschools")}),$("#popss").on("click",function(e){e.preventDefault(),$("#popover_result").val($("#result").val())}),$("body").delegate(".ss-popover","click",function(e){e.preventDefault(),""!=$("#popover_result").val()&&($("#result").val($("#popover_result").val()),$("#ListingSearchForm").submit())}),$(".myrsol-features-toggle").on("click",function(e){e.preventDefault(),advanced_features_toggle()}),"undefined"==store.get("advanced_features")||1==store.get("advanced_features")?$("#adv_ftr_hidden").show():$("#adv_ftr_hidden").hide(),myrsol.propertysearch.classSelectors(),$("#statusSearch").multiselect({buttonWidth:"100%",maxHeight:"100px",buttonContainer:'<div class="btn-group btn-status" />',buttonClass:"btn btn-default",buttonText:function(e,t){if(0==e.length)return"Any Status";if(1==e.length)return e.each(function(){s=$(this).text()}),s;if(e.length>=3)return e.length+" selected statuses";var s="";return e.each(function(){s+=$(this).text()+", "}),s.substr(0,s.length-2)},onChange:function(e,t){}}),$("body").delegate(".extended-login","click",function(e){e.preventDefault(),$("#UserLoginForm, .userRegForm, .userSRegForm").block({message:"Please wait, Logging you in now."}),document.location=$(this).attr("href")})});var myrsol=myrsol||{};myrsol.propertysearch={ctype_sel:$("#search-classtype"),ctype_opts:{buttonWidth:"100%",maxHeight:"100px",buttonContainer:'<div class="btn-group cls-type-container" />',buttonClass:"btn btn-default btn-cls-type",buttonText:function(e,t){if(0==e.length)return"Any Class Type";if(e.length>=5)return e.length+" Class Types Selected";var s="";return e.each(function(){s+=$(this).text()+", "}),s.substr(0,s.length-2)}},rebuildClassType:function(e,t){$("#search-classtype").multiselect("deselectAll",!1),$("#search-classtype").multiselect("setOptions",e),$("#search-classtype").multiselect("rebuild"),0==t&&$("#search-classtype").multiselect("disable")},classSelectors:function(){$(".feature_select").select2({minimumResultsForSearch:15}),$("#search-classtype").multiselect(myrsol.propertysearch.ctype_opts),$("#search-class").multiselect({buttonWidth:"100%",maxHeight:"100px",buttonClass:"btn btn-default",buttonText:function(e,t){if(0==e.length)return myrsol.propertysearch.rebuildClassType(myrsol.propertysearch.ctype_opts,0),$("#adv_ftr_hidden").empty(),$("#adv_ftr_when_empty").show(),"Select a Property Class";if(1==e.length)return $("#search-classtype").multiselect("deselectAll",!1),$("#search-classtype").multiselect("rebuild"),null==$("#search-classtype").val()?$("#search-classtype").multiselect("disable"):$("#search-classtype").multiselect("enable"),$("#adv_ftr_when_empty").hide(),$.get("/listings/ajax_features/"+e.context.value,function(e){$("#adv_ftr_hidden").html(e).show()}).success(function(){}),new_arr=$.parseJSON(class_type_arr),ctype_selected=$.parseJSON(class_type_sel),$.each(new_arr,function(t,s){s.class==e.context.value&&(void 0==s.items||null==s.items||0==s.items.length?($("#search-classtype").multiselect("setOptions",{buttonText:function(e,t){return"No Class Types Available"}}),$("#search-classtype").multiselect("rebuild")):(opt_html="",$.each(s.items,function(e,t){0!==getObjects(ctype_selected,"id",e).length?opt_html+='<option value="'+e+'" selected="selected">'+t+"</option>":opt_html+='<option value="'+e+'">'+t+"</option>"}),$("#search-classtype").multiselect("setOptions",myrsol.propertysearch.ctype_opts),$("#search-classtype").multiselect("enable"),$("#search-classtype").html(opt_html).multiselect("rebuild")))}),e.each(function(){s=$(this).text()}),s;if(e.length>=3)return $("#search-classtype").multiselect("deselectAll",!1),myrsol.propertysearch.rebuildClassType(myrsol.propertysearch.ctype_opts,0),$("#adv_ftr_hidden").empty(),$("#adv_ftr_when_empty").show(),e.length+" selected";myrsol.propertysearch.rebuildClassType(myrsol.propertysearch.ctype_opts,0);var s="";return e.each(function(){s+=$(this).text()+", "}),$("#adv_ftr_hidden").empty(),$("#adv_ftr_when_empty").show(),s.substr(0,s.length-2)},onChange:function(e,t){$("#ListingSearchForm").valid()}})}},$(document).ready(function(){var e=controller+"/"+action;if(e){$.validator.setDefaults({ignore:"",focusCleanup:!1,errorClass:"has-error",validClass:"has-success",highlight:function(e,t,s){"radio"===e.type||"checkbox"===e.type?this.findByName(e.name).addClass(t).removeClass(s):$(e).addClass(t).removeClass(s),$(e).closest(".form-group").addClass(t).removeClass(s)},unhighlight:function(e,t,s){"radio"===e.type||"checkbox"===e.type?this.findByName(e.name).removeClass(t).addClass(s):$(e).removeClass(t).addClass(s),$(e).parents(".form-group").removeClass("has-error").addClass("has-success"),$(e).closest(".form-group").find('label[generated="true"]').html("")},errorPlacement:function(e,t){t.parent(".input-group").length||"checkbox"===t.prop("type")||"radio"===t.prop("type")?e.insertAfter(t.parent()):e.insertAfter(t)}}),$.validator.addMethod("phoneno",function(e,t){return e=e.replace(/\s+/g,"").replace(/_/g,""),this.optional(t)||e.length>9&&e.match(/^(\+?1-?)?(\([2-9]([02-9]\d|1[02-9])\)|[2-9]([02-9]\d|1[02-9]))-?[2-9]([02-9]\d|1[02-9])-?\d{4}(\s*x\s*\d{0,5})?$/)},"Please specify a valid US phone number"),$.validator.addMethod("forms_alphanumeric",function(e,t){return this.optional(t)||/^[a-z0-9._\-\s]+$/i.test(e)},"Field must contain only letters (a-z), numbers (0-9), dashes, periods, underscores or spaces"),$.validator.addMethod("forms_alpha",function(e,t){return this.optional(t)||/^[a-z\s]+$/i.test(e)},"Field must contain only letters (a-z) and spaces"),$.validator.addMethod("forms_url2",function(e,t){return this.optional(t)||/^(?:(?:(?:https?|ftp):)?\/\/)?(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})).?)(?::\d{2,5})?(?:[/?#]\S*)?$/i.test(e)},"Please enter a valid url.");var t=$.validator.prototype.resetForm;switch($.extend($.validator.prototype,{resetForm:function(){t.call(this),this.elements().closest(".form-group").removeClass(this.settings.errorClass+" "+this.settings.validClass)},showLabel:function(e,t){var s=this.errorsFor(e);s.length?(s.removeClass(this.settings.validClass).addClass(this.settings.errorClass),s.attr("generated")&&s.html(t)):(s=$("<"+this.settings.errorElement+"/>").attr({for:this.idOrName(e),generated:!0}).addClass(this.settings.errorClass).addClass("help-block").html(t||""),this.settings.wrapper&&(s=s.hide().show().wrap("<"+this.settings.wrapper+"/>").parent()),this.labelContainer.append(s).length||(this.settings.errorPlacement?this.settings.errorPlacement(s,$(e)):s.insertAfter(e))),!t&&this.settings.success&&(s.text(""),"string"==typeof this.settings.success?s.addClass(this.settings.success):this.settings.success(s,e)),this.toShow=this.toShow.add(s)}}),$.validator.addMethod("greaterThan",function(e,t,s){var a,o=$(t);return 0==(a="string"==typeof s?$(s):$("#"+o.data("min"))).val().length||(this.settings.onfocusout&&a.off(".validate-greaterThan").on("blur.validate-greaterThan",function(){o.valid()}),this.optional(t)||parseInt(e)>=parseInt(a.val()))},"Max must be greater than min"),$.validator.addClassRules({greaterThan:{greaterThan:!0}}),e){case"listings/search":case"listings/search_by_area":case"listings/search_by_zipcode":case"listings/search_by_subdivision":$("#ListingSearchForm").validate({errorClass:"has-error",errorElement:"span",errorPlacement:function(e,t){$(t).closest(".panel").find("div.error-container span").each(function(e,s){$(s).attr("for")==$(t).attr("id")&&$(t).closest(".panel").find("div.error-container span[for='"+$(s).attr("for")+"']").remove()}),e.appendTo($(t).closest(".panel").find("div.error-container"))},showErrors:function(e,t){$.each(t,function(e,t){var s="";"search-class"!==t.element.id&&(s=$(t.element).closest("div").find("label").text()),""!=s&&void 0!==s&&(s+=": "),this.message=s+this.message}),this.defaultShowErrors()},unhighlight:function(e,t,s){$(e).closest(".panel").find("div.error-container").empty(),$(e).removeClass(t).addClass(s),$(e).parents(".form-group").removeClass("has-error").addClass("has-success"),$(e).closest(".form-group").find('label[generated="true"]').html("")},rules:{"data[Listing][city][]":{maxlength:30},"data[Listing][area][]":{maxlength:30},"data[Listing][zipcode][]":{maxlength:30},"data[Listing][property][]":{maxlength:30},"data[Listing][class][]":{required:!0,minlength:1}},messages:{"data[Listing][city][]":{maxlength:"Please narrow your search to less than 30 cities"},"data[Listing][area][]":{maxlength:"Please narrow your search to less than 30 areas"},"data[Listing][zipcode][]":{maxlength:"Please narrow your search to less than 30 zipcodes"},"data[Listing][property][]":{maxlength:"Please narrow your search to less than 30 subdivisions"},"data[Listing][class][]":{required:"Please select a property type",minlength:"Please select at least 1 property type"}}});break;case"agents/view":$("#AgentContactForm").validate();break;case"blogs/view":case"blog_comments/reply_to":$("#BlogCommentAddForm").validate({messages:{"data[BlogComment][email]":{email:"Please enter a valid email address. (Will not be published)"}}});break;case"contact/index":$("#ContactForm").validate();break;case"custom_listings/view":$("#MoreInfoForm").validate(),$("#TellAFriendForm").validate();break;case"users/lostpassword":$("#UserLostpasswordForm").validate()}}});